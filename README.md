Парсер документации Python и PEP

Описание проекта

Этот проект представляет собой парсер с командной строкой, который извлекает данные с сайтов документации Python (https://docs.python.org/3/) и Python Enhancement Proposals (PEP) (https://peps.python.org/). Парсер поддерживает несколько режимов для сбора различных данных: новостей из раздела "What's New", списка версий Python, статистики статусов PEP и загрузки PDF-архива документации. Результаты можно выводить в консоль в читаемом формате или сохранять в файл. Парсер обрабатывает ошибки с помощью структурированного логирования и использует кэширование запросов для повышения производительности.

Возможности





whats-new: Извлекает данные из раздела "What's New" документации Python: ссылки на статьи, заголовки и авторов/редакторов.



latest-versions: Получает список версий Python и их статусов из боковой панели документации.



download: Загружает PDF-архив документации Python (в формате A4) и сохраняет его локально.



pep: Анализирует страницы PEP, подсчитывает статусы, выявляет несоответствия между ожидаемыми и фактическими статусами и логирует неизвестные аббревиатуры.



Гибкий вывод: Поддерживает форматированный вывод в консоль или сохранение результатов в файл.



Обработка ошибок: Надежно обрабатывает сетевые ошибки и проблемы парсинга с подробным логированием.



Кэширование: Использует кэширование HTTP-запросов для ускорения повторных запусков.

Технологический стек





Python: 3.8 или выше



Библиотеки:





requests и requests_cache: Для выполнения и кэширования HTTP-запросов.



beautifulsoup4 (bs4): Для парсинга HTML-страниц.



tqdm: Для отображения прогресс-бара во время парсинга.



argparse: Для обработки аргументов командной строки.



logging: Для структурированного логирования событий и ошибок.



pathlib: Для работы с путями к файлам.



re: Для работы с регулярными выражениями.



collections.defaultdict: Для подсчета статусов PEP.

Установка





Клонируйте репозиторий:

git clone <url-репозитория>
cd <директория-репозитория>



Создайте виртуальное окружение (рекомендуется):

python -m venv venv
source venv/bin/activate  # Для Windows: venv\Scripts\activate



Установите зависимости:

pip install -r requirements.txt

Пример содержимого requirements.txt:

requests==2.28.1
requests-cache==0.9.5
beautifulsoup4==4.11.1
tqdm==4.64.1



Проверьте структуру директорий:





Парсер автоматически создает папки logs/ и downloads/ в корне проекта для хранения логов и загруженных файлов.



Логи сохраняются в logs/parser.log.

Использование

Запустите парсер с помощью скрипта main.py, указав один из доступных режимов:

python main.py <режим> [--clear-cache] [--output {pretty,file}]

Доступные режимы





whats-new: Парсит раздел "What's New".



latest-versions: Извлекает список версий Python и их статусы.



download: Загружает PDF-архив документации.



pep: Анализирует статусы PEP и логирует несоответствия или неизвестные аббревиатуры.

Опции





--clear-cache: Очищает кэш HTTP-запросов перед запуском.



--output {pretty,file}: Формат вывода результатов:





pretty: Форматированная таблица в консоли.



file: Сохранение результатов в файл в корне проекта.

Примеры команд

# Парсинг раздела "What's New" с выводом в консоль
python main.py whats-new --output pretty

# Анализ PEP с сохранением результатов в файл
python main.py pep --output file

# Загрузка PDF-архива документации
python main.py download

# Очистка кэша и парсинг версий Python
python main.py latest-versions --clear-cache --output pretty